<html><head><META http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Embedding Gradle using the Tooling API - Gradle User Guide Version 2.14.1</title><link xmlns:xslthl="http://xslthl.sf.net" type="text/css" rel="stylesheet" href="base.css"><link xmlns:xslthl="http://xslthl.sf.net" type="text/css" rel="stylesheet" href="docs.css"><link xmlns:xslthl="http://xslthl.sf.net" type="text/css" rel="stylesheet" href="userguide.css"><meta content="DocBook XSL Stylesheets V1.75.2" name="generator"><link rel="home" href="userguide.html" title="Gradle User Guide Version 2.14.1"><link rel="up" href="pt02.html" title="Part&nbsp;II.&nbsp;Working with existing builds"><link rel="prev" href="troubleshooting.html" title="Troubleshooting - Gradle User Guide Version 2.14.1"><link rel="next" href="pt03.html" title="Part&nbsp;III.&nbsp;Writing Gradle build scripts"></head><body><div class="navheader"><div><div class="navbar"><a xmlns:xslthl="http://xslthl.sf.net" href="troubleshooting.html" title="Troubleshooting - Gradle User Guide Version 2.14.1">Previous</a><span>|</span><a xmlns:xslthl="http://xslthl.sf.net" href="userguide.html" title="Gradle User Guide Version 2.14.1">Contents</a><span>|</span><a xmlns:xslthl="http://xslthl.sf.net" href="pt03.html" title="Part&nbsp;III.&nbsp;Writing Gradle build scripts">Next</a></div></div></div><div class="chapter"><div class="titlepage"><div><div><h1 xmlns:xslthl="http://xslthl.sf.net"><a name="embedding"></a>Chapter&nbsp;13.&nbsp;Embedding Gradle using the Tooling API</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="embedding.html#sec:embedding_introduction">13.1. Introduction to the Tooling API</a></span></dt><dt><span class="section"><a href="embedding.html#sec:embedding_features">13.2. Tooling API Features</a></span></dt><dt><span class="section"><a href="embedding.html#sec:embedding_daemon">13.3. Tooling API and the Gradle Build Daemon</a></span></dt><dt><span class="section"><a href="embedding.html#sec:embedding_quickstart">13.4. Quickstart</a></span></dt><dt><span class="section"><a href="embedding.html#sec:embedding_compatibility">13.5. Gradle and Java version compatibility</a></span></dt></dl></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a xmlns:xslthl="http://xslthl.sf.net" name="sec:embedding_introduction" class="section-anchor" href="#sec:embedding_introduction"></a>13.1.&nbsp;Introduction to the Tooling API</h2></div></div></div><p>Gradle provides a programmatic API called the Tooling API,
            which you can use for embedding Gradle into your own software.
            This API allows you to execute and monitor builds and to query Gradle about the details of a build.
            The main audience for this API is IDE, CI server, other UI authors; however, the API is open for anyone who needs to embed Gradle in their application.

            </p><p>Gradle提供了一个可编程的接口，叫做Tooling API，它可以用于将Gradle嵌入到你自己的软件中。此接口可以让你执行并监控构建、获取构建的细节。它主要的受众是集成开发工具、CI服务器、或者其他UI开发者。尽管如此，此接口是开放的，任何人都可以用它将Gradle嵌入到自己的应用中。</p>
<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><a class="link" href="test_kit.html">Gradle TestKit</a> uses the Tooling API for functional testing of your Gradle plugins.
                </li><li class="listitem"><a class="ulink" href="http://projects.eclipse.org/projects/tools.buildship" target="_top">Eclipse Buildship</a> uses the Tooling API for importing your Gradle project and running tasks.
                </li><li class="listitem"><a class="ulink" href="https://www.jetbrains.com/idea/" target="_top">IntelliJ IDEA</a> uses the Tooling API for importing your Gradle project and running tasks.
                </li></ul></div><p>Gradle TestKit 使用Tooling API用于你开发的Gradle插件的功能测试<br>Eclipse Buildship 使用 Tooling API 导入你的Gradle项目并执行构建<br>IntelliJ IDEA 使用Tooling API导入Gradle项目并执行构建</p>
				</div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a xmlns:xslthl="http://xslthl.sf.net" name="sec:embedding_features" class="section-anchor" href="#sec:embedding_features"></a>13.2.&nbsp;Tooling API Features</h2></div></div></div><p>A fundamental characteristic of the Tooling API is that it operates in a version independent way.
            This means that you can use the same API to work with different target versions of Gradle, including versions that are both newer and older than the version of the Tooling API that you are using.
            The Tooling API is Gradle wrapper aware and, by default, uses the same target Gradle version as that used by the wrapper-powered project.
        </p><p>Some features that the Tooling API provides:
            </p><p>Tooling API一个基本的特征就是它是独立运行的，这意味着你可以使用相同的API在不同版本的Gradle上工作，即便你使用的Gradle版本比Tooling API高或者低。Tooling API可以识别Gradle包装器，默认情况下，包装器项目使用什么版本的Gradle，它就使用什么版本。下面是Tooling API提供的一些功能：</p>
			<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">Query the details of a build,
                    including the project hierarchy and the project dependencies,
                    external dependencies (including source and Javadoc jars),
                    source directories and tasks of each project.
                </li><li class="listitem">Execute a build and listen to stdout and stderr logging and progress messages
                    (e.g. the messages shown in the 'status bar' when you run on the command line).
                </li><li class="listitem">Execute a specific test class or test method.</li><li class="listitem">Receive interesting events as a build executes, such as project configuration, task execution or test execution.</li><li class="listitem">Cancel a build that is running.</li><li class="listitem">Combine multiple separate Gradle builds into a single composite build.</li><li class="listitem">The Tooling API can download and install the appropriate Gradle version, similar to the wrapper.
                </li><li class="listitem">The implementation is lightweight, with only a small number of dependencies.
                    It is also a well-behaved library, and makes no assumptions about your classloader structure or logging configuration.
                    This makes the API easy to embed in your application.
                </li></ul></div><p>查询构建详情，包括项目结构和项目依赖，外部依赖（包括源码jar与文档jar），源目录，还有每个项目的任务。<br>执行构建并监听标准输出与标准错误的日志和进度消息（例如在命令行构建时显示在状态栏的消息）<br>执行指定的测试类或者测试某个方式<br>接收执行构建时比较关心的事件消息，例如项目配置、任务执行或者测试执行<br>取消正在执行的构建<br>将多个独立的构建合并成一个<br>Tooling API可以下载并安装适合版本的Gradle，这跟包装器类似。<br>它的实现是轻量级的，只有极少量的依赖项。它也是一个行为良好的库，没有对您的类加载器结构或者日志记录配置做任何假设（表示不会往里面强加东西）。这使得它很容易嵌入到你的应用中。</p>
				</div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a xmlns:xslthl="http://xslthl.sf.net" name="sec:embedding_daemon" class="section-anchor" href="#sec:embedding_daemon"></a>13.3.&nbsp;Tooling API and the Gradle Build Daemon</h2></div></div></div><p>
            The Tooling API always uses the Gradle daemon. This means that subsequent calls to the Tooling API, be it model building requests or task executing requests
            will be executed in the same long-living process. <a class="xref" href="gradle_daemon.html">Chapter&nbsp;6, <i>The Gradle Daemon</i></a> contains more details about the daemon,
            specifically information on situations when new daemons are forked.
        </p><p>Tooling API总是启用Gradle守护。这意味着不同时间调用Tooling API，如模型构建请求与任务执行请求，是在同一个周期内的进程里执行。第6节包含更多关于Gradle守护的内容</p>
		</div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a xmlns:xslthl="http://xslthl.sf.net" name="sec:embedding_quickstart" class="section-anchor" href="#sec:embedding_quickstart"></a>13.4.&nbsp;Quickstart</h2></div></div></div><p>As the Tooling API is an interface for developers, the Javadoc is the main documentation for it. We provide several <span class="emphasis"><em>samples</em></span> that live
            in <code class="filename">samples/toolingApi</code> in your Gradle distribution. These samples specify all of the required dependencies for the Tooling API with examples for
            querying information from Gradle builds and executing tasks from the Tooling API.
        </p><p>Tooling API是面向开发者的接口，Javadoc是它主要的文档。在发布包的samples/toolingApi目录，我们提供了一些样例。这些样例指定了Tooling API需要的依赖，并提供了从Gradle构建到执行工具API中的任务的示例。</p><p>
            The main entry point to the Tooling API is the <a class="ulink" href="../javadoc/org/gradle/tooling/GradleConnector.html" target="_top"><code class="classname">GradleConnector</code></a>. You can navigate from there to find code samples and
            explore the available Tooling API models.

            There are two ways of using the <code class="literal">GradleConnector</code> to connect to a Gradle build.
            </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
                    You can use <a class="ulink" href="../javadoc/org/gradle/tooling/GradleConnector.html#connect()" target="_top"><code class="classname">GradleConnector.connect()</code></a> to create a <a class="ulink" href="../javadoc/org/gradle/tooling/ProjectConnection.html" target="_top"><code class="classname">ProjectConnection</code></a>.
                    A <code class="literal">ProjectConnection</code> connects to a single Gradle project. Using the connection you can execute tasks, tests and retrieve models relative to this project.
                    This is the original API provided by the Tooling API. Use this API when you wish to use a stable non-incubating API.
                </li><li class="listitem">
                    You can use <a class="ulink" href="../javadoc/org/gradle/tooling/GradleConnector.html#newGradleConnection()" target="_top"><code class="classname">GradleConnector.newGradleConnection()</code></a> to create a
                    <a class="ulink" href="../javadoc/org/gradle/tooling/connection/GradleConnectionBuilder.html" target="_top"><code class="classname">GradleConnectionBuilder</code></a>.
                    <code class="literal">GradleConnectionBuilder</code> can be used to connect to any number of Gradle builds at one time. Executing tasks and retrieving models are performed in the context
                    of the composite. Instead of retrieving a single model for a single Gradle project, the Tooling API can provide all models for all projects with a single method call.
                    Note that this API is currently <a class="link" href="feature_lifecycle.html">incubating</a> and may change at any time.
                </li></ul></div><p>Tooling API的主入口是GradleConnector。你可以导航到目录查看可用的Tooling API模型。有两种方法使用GradleConnector来连接Gradle构建。<br><br>你可以使用GradleConnector.connect()来创建一个ProjectConnection。ProjectConnection连接到一个单独的Gradle项目，你可使用connection来执行任务、测试、检索模型。这是Tooling API提供的原始的接口。当你想要使用一个稳定的Tooing API时，你可以使用此接口。<br>你可以使用GradleConnector.newGradleConnection()来创建GradleConnectionBuilder。GradleConnectionBuilder可以一次连接到任意次数的Gradle构建。执行任务、检索模型在混合的上下文环境中运行。不同于通用的从一个单独的项目中检索一个单独的模型，只需要一个简单方法的调用，Tooling API可以获取到所有项目的所有模型。不过要谨记这个API还是在继续开发中，可能随时改变。</p>
				</div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a xmlns:xslthl="http://xslthl.sf.net" name="sec:embedding_compatibility" class="section-anchor" href="#sec:embedding_compatibility"></a>13.5.&nbsp;Gradle and Java version compatibility</h2></div></div></div><p>The current version of the Tooling API supports running builds using Gradle versions 1.0-milestone-8 and later. Support for versions from 1.0-milestone-8 to 1.1 is deprecated and will be removed from the Tooling API in Gradle 3.0.</p><p>You should note that not all features of the Tooling API are available for all versions of Gradle. For example, build cancellation is only available when a build uses Gradle 2.1 and later. Refer to the documentation for each class and method for more details.</p><p>The current Gradle version can be used from Tooling API versions 1.2 or later. Support for execution using tooling API versions 1.2 to 1.12 is deprecated and will be removed in Gradle 3.0.</p><p>The Tooling API requires Java 6 or later. Support for Java 6 is currently deprecated and will be removed in Gradle 3.0.</p>
				<p>当前版本的Tooling API支持运行在Gradle 1.0-milestone-8版本以上。对1.0-milestone-8到1.1版本的支持会在Gradle 3.0版本的Tooling API中移除。<br>你应该注意到，Tooling API并不是全部功能都能使用。例如取消功能只有当使用Gradle 2.1版本及以上才能使用。阅读相关API文档了解类与方法的更多细节。<br>当前版本的Gradle可以使用Tooling API 1.2版本及以上。API 1.2到1.12会在Gradle 3.0中移除。<br>Tooling APi需要Java 6以上版本。Gradle 3.0中不再继续Java 6。</p>
				</div></div><div class="navfooter"><div><div class="navbar"><a xmlns:xslthl="http://xslthl.sf.net" href="troubleshooting.html" title="Troubleshooting - Gradle User Guide Version 2.14.1">Previous</a><span>|</span><a xmlns:xslthl="http://xslthl.sf.net" href="userguide.html" title="Gradle User Guide Version 2.14.1">Contents</a><span>|</span><a xmlns:xslthl="http://xslthl.sf.net" href="pt03.html" title="Part&nbsp;III.&nbsp;Writing Gradle build scripts">Next</a></div></div></div></body></html>